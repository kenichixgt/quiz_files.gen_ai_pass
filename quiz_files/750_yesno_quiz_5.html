<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”ŸæˆAIãƒ‘ã‚¹ãƒãƒ¼ãƒˆ5ç« ç·´ç¿’å•é¡Œ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f4f7f9;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #1e3a5f;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }
        h2 {
            margin-top: 40px;
        }
        #score-board {
            background-color: #eef4ff;
            border: 1px solid #d4e2f4;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            font-weight: bold;
            color: #1e3a5f;
        }
        #filter-controls {
            margin: 20px 0;
        }
        .filter-button {
            padding: 8px 15px;
            font-size: 14px;
            border: 1px solid #007bff;
            background-color: #fff;
            color: #007bff;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            margin-right: 5px;
        }
        .filter-button:hover, .filter-button.active {
            background-color: #007bff;
            color: white;
        }
        .question-block {
            background: #fafcff;
            border: 1px solid #d4e2f4;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            transition: box-shadow 0.3s ease;
            position: relative;
        }
        .question-block:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .flag-button {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 20px;
            cursor: pointer;
            background: none;
            border: none;
            padding: 5px;
            opacity: 0.5;
        }
        .flag-button.flagged {
            opacity: 1.0;
        }
        .question-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #3b5998;
            padding-right: 30px; /* Make space for flag button */
        }
        .options label {
            display: block;
            margin: 10px 0;
            cursor: pointer;
            transition: color 0.2s;
        }
        .options label:hover {
            color: #0056b3;
        }
        .answer-section {
            display: none;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px dashed #e2e8f0;
        }
        .answer-header {
            font-weight: bold;
            color: #007bff;
            margin-bottom: 5px;
        }
        .answer-correct, .answer-incorrect {
            font-weight: bold;
        }
        .answer-correct {
            color: #28a745;
        }
        .answer-incorrect {
            color: #dc3545;
        }
        .explanation {
            margin-top: 10px;
            color: #555;
        }
        .grade-button, .export-button, .import-button, .clear-button {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-right: 10px;
        }
        .grade-button { background-color: #007bff; color: white; }
        .grade-button:hover { background-color: #0056b3; }
        .export-button { background-color: #28a745; color: white; }
        .export-button:hover { background-color: #218838; }
        .import-button { background-color: #ffc107; color: #333; }
        .import-button:hover { background-color: #e0a800; }
        .clear-button { background-color: #dc3545; color: white; }
        .clear-button:hover { background-color: #c82333; }
        .status-message { margin-top: 10px; font-weight: bold; color: #333; }
        #import-input { margin-top: 10px; width: 100%; padding: 8px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container">
    <h1>ç”ŸæˆAIãƒ‘ã‚¹ãƒãƒ¼ãƒˆ5ç« ç·´ç¿’å•é¡Œ</h1>
    
    <div id="score-board">
        <span>æ­£ç­”æ•°: <span id="correct-count">0</span></span>
        <span>å›ç­”æ•°: <span id="answered-count">0</span></span>
        <span>æ­£è§£ç‡: <span id="accuracy-rate">0.0</span>%</span>
    </div>

    <div id="controls">
        <button class="export-button" onclick="exportState()">çµæœã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
        <button class="import-button" onclick="showImport()">çµæœã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
        <button class="clear-button" onclick="clearState()">å›ç­”ã‚’ã‚¯ãƒªã‚¢</button>
        <div id="import-area" style="display:none;">
            <input type="text" id="import-input" placeholder="ã“ã“ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„">
            <button class="import-button" onclick="importState()">ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Ÿè¡Œ</button>
            <div id="status-message" class="status-message"></div>
        </div>
    </div>
    
    <div id="filter-controls">
        <strong>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼:</strong>
        <button class="filter-button active" onclick="applyFilter('all')">å…¨ã¦è¡¨ç¤º</button>
        <button class="filter-button" onclick="applyFilter('flagged')">ãƒ•ãƒ©ã‚°</button>
        <button class="filter-button" onclick="applyFilter('unanswered')">æœªå›ç­”</button>
        <button class="filter-button" onclick="applyFilter('correct')">æ­£ç­”</button>
        <button class="filter-button" onclick="applyFilter('incorrect')">èª¤ç­”</button>
    </div>

    <div id="quiz-container"></div>
</div>

<script>
    const quizData = [
        {
            "section": "ç¬¬5ç«  ç¢ºèªå•é¡Œ",
            "questions": [
                {
                    "q": "çµŒæ¸ˆç”£æ¥­çœãƒ»ç·å‹™çœã‹ã‚‰å…¬è¡¨ã•ã‚Œã¦ã„ã‚‹ã€ŒAIäº‹æ¥­è€…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ã«ã‚ˆã‚Œã°ã€ã€ŒåŸºæœ¬ç†å¿µã€ã¨ã•ã‚Œã¦ã„ã‚‹ã®ã¯ã€äººé–“ã®å°Šå³ãŒå°Šé‡ã•ã‚Œã‚‹ç¤¾ä¼šã€å¤šæ§˜ãªèƒŒæ™¯ã‚’æŒã¤äººã€…ãŒå¤šæ§˜ãªå¹¸ã›ã‚’è¿½æ±‚ã§ãã‚‹ç¤¾ä¼šã€æŒç¶šå¯èƒ½ãªç¤¾ä¼šã®ï¼“ã¤ã§ã‚ã‚‹ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 0,
                    "explanation": "è§£èª¬ã®é€šã‚Šã§ã™ã€‚çµŒæ¸ˆç”£æ¥­çœãƒ»ç·å‹™çœã‹ã‚‰å…¬è¡¨ã•ã‚Œã¦ã„ã‚‹ã€ŒAIäº‹æ¥­è€…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ã«ã‚ˆã‚Œã°ã€ã€ŒåŸºæœ¬ç†å¿µã€ã¨ã•ã‚Œã¦ã„ã‚‹ã®ã¯ã€äººé–“ã®å°Šå³ãŒå°Šé‡ã•ã‚Œã‚‹ç¤¾ä¼š (Dignity)ã€å¤šæ§˜ãªèƒŒæ™¯ã‚’æŒã¤äººã€…ãŒå¤šæ§˜ãªå¹¸ã›ã‚’è¿½æ±‚ã§ãã‚‹ç¤¾ä¼š (Diversity & Inclusion)ã€æŒç¶šå¯èƒ½ãªç¤¾ä¼š (Sustainability) ã®ï¼“ã¤ã§ã™ã€‚"
                },
                {
                    "q": "çµŒæ¸ˆç”£æ¥­çœãƒ»ç·å‹™çœã‹ã‚‰å…¬è¡¨ã•ã‚Œã¦ã„ã‚‹ã€ŒAIäº‹æ¥­è€…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ã«ã‚ˆã‚Œã°ã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹ç™ºãƒ»æä¾›ãƒ»åˆ©ç”¨ã™ã‚‹å„ä¸»ä½“ãŒã€å–çµ„ã‚’è¡Œã†ã«ã‚ãŸã‚Šç•™æ„ã™ã¹ãã‚‚ã®ã¨ã—ã¦ã€10é …ç›®ã®ã€Œå…±é€šã®æŒ‡é‡ã€ãŒå®šã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 0,
                    "explanation": "è§£èª¬ã®é€šã‚Šã§ã™ã€‚ã€ŒAIäº‹æ¥­è€…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ã§ã¯ã€â‘ äººé–“ä¸­å¿ƒã€â‘¡å®‰å…¨æ€§ã€â‘¢å…¬å¹³æ€§ã€â‘£ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·ã€â‘¤ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºä¿ã€â‘¥é€æ˜æ€§ã€â‘¦ã‚¢ã‚«ã‚¦ãƒ³ã‚¿ãƒ“ãƒªãƒ†ã‚£ã€â‘§æ•™è‚²ãƒ»ãƒªãƒ†ãƒ©ã‚·ãƒ¼ã€â‘¨å…¬æ­£ç«¶äº‰ç¢ºä¿ã€â‘©ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã€ã®10é …ç›®ã®ã€Œå…±é€šã®æŒ‡é‡ã€ãŒå®šã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚"
                },
                {
                    "q": "çµŒæ¸ˆç”£æ¥­çœãƒ»ç·å‹™çœã‹ã‚‰å…¬è¡¨ã•ã‚Œã¦ã„ã‚‹ã€ŒAIäº‹æ¥­è€…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ã«ãŠã‘ã‚‹ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œäººé–“ä¸­å¿ƒã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºãƒ»æä¾›ãƒ»åˆ©ç”¨ã«ãŠã„ã¦ã€å°‘ãªãã¨ã‚‚æ†²æ³•ãŒä¿éšœã™ã‚‹ã¾ãŸã¯å›½éš›çš„ã«èªã‚ã‚‰ã‚ŒãŸäººæ¨©ã‚’ä¾µã™ã“ã¨ãŒãªã„ã‚ˆã†ã«ã™ã¹ãã§ã‚ã‚Šã€ã¾ãŸã€AIãŒäººã€…ã®èƒ½åŠ›ã‚’æ‹¡å¼µã—ã€å¤šæ§˜ãªäººã€…ã®å¤šæ§˜ãªå¹¸ã›ã®è¿½æ±‚ãŒå¯èƒ½ã¨ãªã‚‹ã‚ˆã†ã«è¡Œå‹•ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã‚ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 0,
                    "explanation": "è§£èª¬ã®é€šã‚Šã§ã™ã€‚ã€Œäººé–“ä¸­å¿ƒã€ã®æŒ‡é‡ã§ã¯ã€äººæ¨©ã®å°Šé‡ãŒåœŸå°ã§ã‚ã‚‹ã“ã¨ã€ãã—ã¦AIãŒäººã€…ã®èƒ½åŠ›ã‚’æ‹¡å¼µã—ã€å¹¸ã›ã®è¿½æ±‚ã‚’å¯èƒ½ã«ã™ã‚‹ã“ã¨ã®é‡è¦æ€§ãŒè¿°ã¹ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚"
                },
                {
                    "q": "ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œå®‰å…¨æ€§ã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºãƒ»æä¾›ãƒ»åˆ©ç”¨ã‚’é€šã˜ã€ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã®è²¡ç”£ã«å±å®³ã‚’åŠã¼ã™ã“ã¨ãŒãªã„ã‚ˆã†ã«ã™ã¹ãã§ã‚ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ãŒã€ç²¾ç¥ãŠã‚ˆã³ç’°å¢ƒã«å±å®³ã‚’åŠã¼ã™ã“ã¨ãŒãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã«ã¤ã„ã¦ã¯ã€è¨€åŠã•ã‚Œã¦ã„ãªã„ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 1,
                    "explanation": "ã€Œå®‰å…¨æ€§ã€ã®æŒ‡é‡ã§ã¯ã€ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã®ç”Ÿå‘½ãƒ»èº«ä½“ãƒ»è²¡ç”£ã ã‘ã§ãªãã€ã€ŒåŠ ãˆã¦ã€ç²¾ç¥ãŠã‚ˆã³ç’°å¢ƒã«ã‚‚å±å®³ã‚’åŠã¼ã™ã“ã¨ãŒãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã‚ã‚‹ã€ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€å•é¡Œæ–‡ã®è¨˜è¿°ã¯èª¤ã‚Šã§ã™ã€‚"
                },
                {
                    "q": "ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œå…¬å¹³æ€§ã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€ä¸å½“ã§æœ‰å®³ãªåè¦‹ãŠã‚ˆã³æ³•è¦ã‚’ãªãã™ã‚ˆã†åŠªã‚ã‚‹ã“ã¨ãŒé‡è¦ã¨ã•ã‚Œã€ãã‚Œã§ã‚‚å›é¿ã§ããªã„ãƒã‚¤ã‚¢ã‚¹ãŒã‚ã‚‹ã“ã¨ã‚’èªè­˜ã—ã¤ã¤ã€ã“ã®å›é¿ã§ããªã„ãƒã‚¤ã‚¢ã‚¹ãŒäººæ¨©ãŠã‚ˆã³å¤šæ§˜ãªæ–‡åŒ–ã‚’å°Šé‡ã™ã‚‹è¦³ç‚¹ã‹ã‚‰è¨±å®¹å¯èƒ½ã‹è©•ä¾¡ã—ãŸä¸Šã§ã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºãƒ»æä¾›ãƒ»åˆ©ç”¨ã‚’è¡Œã†ã“ã¨ãŒé‡è¦ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 0,
                    "explanation": "è§£èª¬ã®é€šã‚Šã§ã™ã€‚ã€Œå…¬å¹³æ€§ã€ã®æŒ‡é‡ã§ã¯ã€ä¸å½“ã§æœ‰å®³ãªåè¦‹ã‚„å·®åˆ¥ã®è§£æ¶ˆã«åŠªã‚ã‚‹ã“ã¨ã€ãã—ã¦å›é¿ã§ããªã„ãƒã‚¤ã‚¢ã‚¹ã«ã¤ã„ã¦ã¯äººæ¨©ã‚„å¤šæ§˜ãªæ–‡åŒ–ã®å°Šé‡ã®è¦³ç‚¹ã‹ã‚‰è¨±å®¹å¯èƒ½ã‹è©•ä¾¡ã™ã‚‹ã“ã¨ã®é‡è¦æ€§ãŒè¿°ã¹ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚"
                },
                {
                    "q": "ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·ã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºãƒ»æä¾›ãƒ»åˆ©ç”¨ã«ãŠã„ã¦ã€é–¢ä¿‚æ³•ä»¤ã‚’éµå®ˆã™ã‚‹ã¨ã¨ã‚‚ã«ã€ãã®é‡è¦æ€§ã®ç¨‹åº¦ã«ã‹ã‹ã‚ã‚‰ãšãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’å°Šé‡ã—ã€ä¿è­·ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã‚ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 1,
                    "explanation": "ã€Œãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·ã€ã®æŒ‡é‡ã§ã¯ã€ã€Œãã®é‡è¦æ€§ã«å¿œã˜ã€ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’å°Šé‡ã—ã€ä¿è­·ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã‚ã‚‹ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã€Œé‡è¦æ€§ã®ç¨‹åº¦ã«ã‹ã‹ã‚ã‚‰ãšã€ã¨ã„ã†å•é¡Œæ–‡ã®è¨˜è¿°ã¯èª¤ã‚Šã§ã™ã€‚"
                },
                {
                    "q": "ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºä¿ã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºãƒ»æä¾›ãƒ»åˆ©ç”¨ã«ãŠã„ã¦ã€ä¸æ­£æ“ä½œã«ã‚ˆã£ã¦AIã®æŒ¯ã‚‹èˆã„ã«æ„å›³ã›ã¬å¤‰æ›´ã¾ãŸã¯åœæ­¢ãŒç”Ÿã˜ã‚‹ã“ã¨ã®ãªã„ã‚ˆã†ã«ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã‚ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 0,
                    "explanation": "è§£èª¬ã®é€šã‚Šã§ã™ã€‚ã“ã‚Œã¯ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºä¿ã€ã®æŒ‡é‡ã«é–¢ã™ã‚‹æ­£ç¢ºãªè¨˜è¿°ã§ã™ã€‚"
                },
                {
                    "q": "ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œé€æ˜æ€§ã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºãƒ»æä¾›ãƒ»åˆ©ç”¨ã«ãŠã„ã¦ã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã™ã‚‹éš›ã®ç¤¾ä¼šçš„æ–‡è„ˆã‚’è¸ã¾ãˆã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®æ¤œæŸ»å¯èƒ½æ€§ã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã‚ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ãŒã€ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã«å¯¾ã™ã‚‹åˆç†çš„ãªç¯„å›²ã§ã®æƒ…å ±æä¾›ã®é‡è¦æ€§ã«ã¤ã„ã¦ã¯è¨€åŠã•ã‚Œã¦ã„ãªã„ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 1,
                    "explanation": "ã€Œé€æ˜æ€§ã€ã®æŒ‡é‡ã§ã¯ã€æ¤œæŸ»å¯èƒ½æ€§ã‚’ç¢ºä¿ã™ã‚‹ã¨ã¨ã‚‚ã«ã€ã€Œå¿…è¦ã‹ã¤æŠ€è¡“çš„ã«å¯èƒ½ãªç¯„å›²ã§ã€ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã«å¯¾ã—åˆç†çš„ãªç¯„å›²ã§æƒ…å ±ã‚’æä¾›ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã‚ã‚‹ã€ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€æƒ…å ±æä¾›ã«ã¤ã„ã¦è¨€åŠã•ã‚Œã¦ã„ãªã„ã¨ã„ã†å•é¡Œæ–‡ã®è¨˜è¿°ã¯èª¤ã‚Šã§ã™ã€‚"
                },
                {
                    "q": "ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œã‚¢ã‚«ã‚¦ãƒ³ã‚¿ãƒ“ãƒªãƒ†ã‚£ã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºãƒ»æä¾›ãƒ»åˆ©ç”¨ã«ãŠã„ã¦ã€ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã«å¯¾ã—ã¦ã€å„ä¸»ä½“ã®å½¹å‰²ãŠã‚ˆã³é–‹ç™ºãƒ»æä¾›ãƒ»åˆ©ç”¨ã™ã‚‹AIã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚‚ãŸã‚‰ã™ãƒªã‚¹ã‚¯ã®ç¨‹åº¦ã‚’è¸ã¾ãˆã€åˆç†çš„ãªç¯„å›²ã§ã‚¢ã‚«ã‚¦ãƒ³ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’æœãŸã™ã“ã¨ãŒé‡è¦ã§ã‚ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 0,
                    "explanation": "è§£èª¬ã®é€šã‚Šã§ã™ã€‚ã€Œã‚¢ã‚«ã‚¦ãƒ³ã‚¿ãƒ“ãƒªãƒ†ã‚£ã€ã®æŒ‡é‡ã§ã¯ã€ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ã®ç¢ºä¿ã‚„å¯¾å¿œçŠ¶æ³ã«ã¤ã„ã¦ã€ãƒªã‚¹ã‚¯ã®ç¨‹åº¦ã‚’è¸ã¾ãˆã¦åˆç†çš„ãªç¯„å›²ã§èª¬æ˜è²¬ä»»ã‚’æœãŸã™ã“ã¨ã®é‡è¦æ€§ãŒè¿°ã¹ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚"
                },
                {
                    "q": "ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œæ•™è‚²ãƒ»ãƒªãƒ†ãƒ©ã‚·ãƒ¼ã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€ä¸»ä½“å†…ã®AIã«é–¢ã‚ã‚‹è€…ãŒã€AIã®æ­£ã—ã„ç†è§£ãŠã‚ˆã³ç¤¾ä¼šçš„ã«æ­£ã—ã„åˆ©ç”¨ãŒã§ãã‚‹çŸ¥è­˜ãƒ»ãƒªãƒ†ãƒ©ã‚·ãƒ¼ãƒ»å€«ç†æ„Ÿã‚’æŒã¤ãŸã‚ã«ã€å¿…è¦ãªæ•™è‚²ã‚’è¡Œã†ã“ã¨ãŒæœŸå¾…ã•ã‚Œã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ãŒã€ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã«å¯¾ã™ã‚‹æ•™è‚²ã¸ã®æœŸå¾…ã«ã¤ã„ã¦ã¯è¨€åŠã•ã‚Œã¦ã„ãªã„ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 1,
                    "explanation": "ã€Œæ•™è‚²ãƒ»ãƒªãƒ†ãƒ©ã‚·ãƒ¼ã€ã®æŒ‡é‡ã§ã¯ã€ä¸»ä½“å†…ã®é–¢ä¿‚è€…ã¸ã®æ•™è‚²ã«åŠ ãˆã€ã€Œã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã«å¯¾ã—ã¦ã‚‚æ•™è‚²ã‚’è¡Œã†ã“ã¨ãŒæœŸå¾…ã•ã‚Œã‚‹ã€ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€å•é¡Œæ–‡ã®è¨˜è¿°ã¯èª¤ã‚Šã§ã™ã€‚"
                },
                {
                    "q": "ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œå…¬æ­£ç«¶äº‰ç¢ºä¿ã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€AIã‚’ã‚ãã‚‹å…¬æ­£ãªç«¶äº‰ç’°å¢ƒã®ç¶­æŒã«åŠªã‚ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 0,
                    "explanation": "è§£èª¬ã®é€šã‚Šã§ã™ã€‚ã€Œå…¬æ­£ç«¶äº‰ç¢ºä¿ã€ã®æŒ‡é‡ã¯ã€AIã‚’æ´»ç”¨ã—ãŸæ–°ãŸãªãƒ“ã‚¸ãƒã‚¹ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®å‰µå‡ºã‚„æŒç¶šçš„ãªçµŒæ¸ˆæˆé•·ã®ãŸã‚ã«ã€å…¬æ­£ãªç«¶äº‰ç’°å¢ƒã‚’ç¶­æŒã™ã‚‹ã“ã¨ã¸ã®æœŸå¾…ã‚’è¿°ã¹ã¦ã„ã¾ã™ã€‚"
                },
                {
                    "q": "ã€Œå…±é€šã®æŒ‡é‡ã€ã®ã†ã¡ã€ã€Œã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã€ã§ã¯ã€å„ä¸»ä½“ã¯ã€ç¤¾ä¼šå…¨ä½“ã®ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¿ƒé€²ã«è²¢çŒ®ã™ã‚‹ã‚ˆã†åŠªã‚ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚",
                    "options": ["â—‹", "Ã—"],
                    "answer": 0,
                    "explanation": "è§£èª¬ã®é€šã‚Šã§ã™ã€‚ã“ã‚Œã¯ã€Œã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã€ã®æŒ‡é‡ã«é–¢ã™ã‚‹æ­£ç¢ºãªè¨˜è¿°ã§ã™ã€‚"
                }
            ]
        }
    ];

    const quizContainer = document.getElementById('quiz-container');
    let userState = {}; // { qIndex: { answer: number, flagged: boolean } }
    let currentFilter = 'all';

    function renderQuiz() {
        quizContainer.innerHTML = '';
        quizData.forEach((section, sectionIndex) => {
            const sectionHeader = document.createElement('h2');
            sectionHeader.textContent = section.section;
            quizContainer.appendChild(sectionHeader);

            section.questions.forEach((question, qIndex) => {
                const globalIndex = quizData.slice(0, sectionIndex).reduce((acc, s) => acc + s.questions.length, 0) + qIndex;
                const questionBlock = document.createElement('div');
                questionBlock.className = 'question-block';
                questionBlock.id = `q-${globalIndex}`;
                
                const questionTitle = document.createElement('div');
                questionTitle.className = 'question-title';
                questionTitle.textContent = `Q${globalIndex + 1}. ${question.q}`;

                const flagButton = document.createElement('button');
                flagButton.className = 'flag-button';
                flagButton.innerHTML = 'ğŸš©';
                flagButton.onclick = () => toggleFlag(globalIndex);
                if (userState[globalIndex] && userState[globalIndex].flagged) {
                    flagButton.classList.add('flagged');
                }
                
                questionBlock.appendChild(flagButton);
                questionBlock.appendChild(questionTitle);
                
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';
                question.options.forEach((option, oIndex) => {
                    const optionLabel = document.createElement('label');
                    const radioInput = document.createElement('input');
                    radioInput.type = 'radio';
                    radioInput.name = `question-${globalIndex}`;
                    radioInput.value = oIndex;
                    optionLabel.appendChild(radioInput);
                    optionLabel.appendChild(document.createTextNode(option));
                    optionsDiv.appendChild(optionLabel);
                });
                questionBlock.appendChild(optionsDiv);

                const gradeButton = document.createElement('button');
                gradeButton.className = 'grade-button';
                gradeButton.textContent = 'å›ç­”ã™ã‚‹';
                gradeButton.onclick = () => showAnswer(globalIndex, question.answer, question.explanation);
                questionBlock.appendChild(gradeButton);

                const answerSection = document.createElement('div');
                answerSection.className = 'answer-section';
                answerSection.id = `answer-${globalIndex}`;
                questionBlock.appendChild(answerSection);
                
                quizContainer.appendChild(questionBlock);
            });
        });
        loadState();
        updateScore();
        applyFilter(currentFilter);
    }

    function showAnswer(qIndex, correctAnswer, explanation) {
        const questionBlock = document.getElementById(`q-${qIndex}`);
        const answerSection = document.getElementById(`answer-${qIndex}`);
        const radioInputs = document.getElementsByName(`question-${qIndex}`);
        let userAnswer = -1;
        radioInputs.forEach((input, index) => {
            if (input.checked) userAnswer = index;
        });

        if (!userState[qIndex]) userState[qIndex] = { answer: -1, flagged: false };
        userState[qIndex].answer = userAnswer;
        saveState();

        answerSection.innerHTML = '';

        if (userAnswer === correctAnswer) {
            answerSection.innerHTML += `<div class="answer-header answer-correct">âœ… æ­£è§£ã§ã™ï¼</div>`;
        } else {
            const selectedOptionText = userAnswer !== -1 ? `ã‚ãªãŸãŒé¸æŠã—ãŸç­”ãˆ: ${quizData[getSectionIndex(qIndex)].questions[qIndex - quizData.slice(0, getSectionIndex(qIndex)).reduce((acc, s) => acc + s.questions.length, 0)].options[userAnswer]}` : 'æœªå›ç­”';
            answerSection.innerHTML += `<div class="answer-header answer-incorrect">âŒ ä¸æ­£è§£ã§ã™ã€‚</div>`;
            answerSection.innerHTML += `<div class="explanation">${selectedOptionText}</div>`;
        }
        answerSection.innerHTML += `<div class="explanation"><strong>æ­£è§£ã¯ã€Œ${quizData[getSectionIndex(qIndex)].questions[qIndex - quizData.slice(0, getSectionIndex(qIndex)).reduce((acc, s) => acc + s.questions.length, 0)].options[correctAnswer]}ã€ã§ã™ã€‚</strong></div>`;
        answerSection.innerHTML += `<div class="explanation"><strong>ã€è§£èª¬ã€‘</strong>${explanation}</div>`;
        answerSection.style.display = 'block';

        questionBlock.querySelector('.grade-button').style.display = 'none';
        radioInputs.forEach(input => input.disabled = true);
        updateScore();
    }

    function toggleFlag(qIndex) {
        if (!userState[qIndex]) userState[qIndex] = { answer: -1, flagged: false };
        userState[qIndex].flagged = !userState[qIndex].flagged;
        
        const flagButton = document.querySelector(`#q-${qIndex} .flag-button`);
        flagButton.classList.toggle('flagged', userState[qIndex].flagged);
        
        saveState();
    }
    
    function updateScore() {
        let correctCount = 0;
        let answeredCount = 0;
        const totalQuestions = quizData.reduce((acc, s) => acc + s.questions.length, 0);

        for (let i = 0; i < totalQuestions; i++) {
            if (userState[i] && userState[i].answer !== -1) {
                answeredCount++;
                const sectionIndex = getSectionIndex(i);
                const qInSectionIndex = i - quizData.slice(0, sectionIndex).reduce((acc, s) => acc + s.questions.length, 0);
                const correctAnswer = quizData[sectionIndex].questions[qInSectionIndex].answer;
                if (userState[i].answer === correctAnswer) {
                    correctCount++;
                }
            }
        }
        
        const accuracy = answeredCount > 0 ? (correctCount / answeredCount) * 100 : 0;
        
        document.getElementById('correct-count').textContent = correctCount;
        document.getElementById('answered-count').textContent = answeredCount;
        document.getElementById('accuracy-rate').textContent = accuracy.toFixed(1);
    }

    function applyFilter(filter) {
        currentFilter = filter;
        const questionBlocks = document.querySelectorAll('.question-block');
        questionBlocks.forEach((block, qIndex) => {
            const state = userState[qIndex] || { answer: -1, flagged: false };
            const sectionIndex = getSectionIndex(qIndex);
            const qInSectionIndex = qIndex - quizData.slice(0, sectionIndex).reduce((acc, s) => acc + s.questions.length, 0);
            const correctAnswer = quizData[sectionIndex].questions[qInSectionIndex].answer;
            
            let show = false;
            switch (filter) {
                case 'all':
                    show = true;
                    break;
                case 'flagged':
                    if (state.flagged) show = true;
                    break;
                case 'unanswered':
                    if (state.answer === -1) show = true;
                    break;
                case 'correct':
                    if (state.answer !== -1 && state.answer === correctAnswer) show = true;
                    break;
                case 'incorrect':
                    if (state.answer !== -1 && state.answer !== correctAnswer) show = true;
                    break;
            }
            block.style.display = show ? 'block' : 'none';
        });
        
        document.querySelectorAll('.filter-button').forEach(btn => btn.classList.remove('active'));
        document.querySelector(`.filter-button[onclick="applyFilter('${filter}')"]`).classList.add('active');
    }

    function getSectionIndex(qIndex) {
        let count = 0;
        for (let i = 0; i < quizData.length; i++) {
            count += quizData[i].questions.length;
            if (qIndex < count) return i;
        }
    }

    function saveState() {
        localStorage.setItem('userQuizState', JSON.stringify(userState));
    }

    function loadState() {
        const savedState = localStorage.getItem('userQuizState');
        if (savedState) {
            userState = JSON.parse(savedState);
            Object.keys(userState).forEach(qIndexStr => {
                const qIndex = parseInt(qIndexStr, 10);
                const state = userState[qIndex];
                if (state.answer !== -1) {
                    const radioInput = document.querySelector(`input[name="question-${qIndex}"][value="${state.answer}"]`);
                    if (radioInput) {
                        radioInput.checked = true;
                        const sectionIndex = getSectionIndex(qIndex);
                        const qInSection = qIndex - quizData.slice(0, sectionIndex).reduce((acc, s) => acc + s.questions.length, 0);
                        showAnswer(qIndex, quizData[sectionIndex].questions[qInSection].answer, quizData[sectionIndex].questions[qInSection].explanation);
                    }
                }
            });
        }
    }
    
    function exportState() {
        if (Object.keys(userState).length === 0) {
            alert("ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å›ç­”ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
            return;
        }
        const data = JSON.stringify(userState);
        const encodedData = btoa(encodeURIComponent(data));
        navigator.clipboard.writeText(encodedData)
            .then(() => alert("å›ç­”çŠ¶æ³ãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸï¼"))
            .catch(err => alert("å›ç­”çŠ¶æ³ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚"));
    }

    function showImport() {
        document.getElementById('import-area').style.display = 'block';
    }

    function importState() {
        const importInput = document.getElementById('import-input');
        const statusMessage = document.getElementById('status-message');
        try {
            const decodedData = decodeURIComponent(atob(importInput.value));
            userState = JSON.parse(decodedData);
            saveState();
            renderQuiz();
            statusMessage.textContent = 'å›ç­”çŠ¶æ³ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼';
            statusMessage.style.color = '#28a745';
        } catch (e) {
            statusMessage.textContent = 'ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚';
            statusMessage.style.color = '#dc3545';
        }
    }

    function clearState() {
        if (confirm('å…¨ã¦ã®å›ç­”çŠ¶æ³ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')) {
            localStorage.removeItem('userQuizState');
            userState = {};
            currentFilter = 'all';
            renderQuiz();
            alert('å…¨ã¦ã®å›ç­”çŠ¶æ³ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸã€‚');
        }
    }

    document.addEventListener('DOMContentLoaded', renderQuiz);
</script>

</body>
</html>